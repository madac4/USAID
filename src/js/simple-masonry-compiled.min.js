"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,o,r){return o&&e(n.prototype,o),r&&e(n,r),n}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["SimpleMasonry"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e:window.SimpleMasonry=e}(function(){var e=[],n=[],o=function(o){var r,t=e.indexOf(o);return 0>t?(e.push(o),r={},n.push(r)):r=n[t],r},r=function(){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,e);var r,t=this,s={masonryBox:".masonry-box",masonryColumn:".masonry-column"},i=void 0,l=void 0,u=void 0;o(t).privates={},r=o(t).privates;for(var a in s)s.hasOwnProperty(a)&&n[a]&&(s[a]=n[a]);r.masonryBox=s.masonryBox,r.masonryColumn=s.masonryColumn,r.isNode=function(e){return e&&"string"==typeof e.innerHTML},r.reverseCopy=function(e){var n=[],o=e.length-1;for(o;o>=0;o-=1)n.push(e[o]);return n},r.splice=function(e){var n=r.columnBoxes[0],o=n.simpleMesonry.items.indexOf(e);o>=0&&n.simpleMesonry.items.splice(o,1)},r.columnBoxes=function(){return r.isNode(r.masonryBox)?[r.masonryBox]:Array.isArray(r.masonryBox)?r.masonryBox:"string"==typeof r.masonryBox?document.querySelectorAll(r.masonryBox):[]}(),r.iBoxes=r.columnBoxes.length-1,r.countAvailableColumns=function(e){var n=e.simpleMesonry.columns,o=n.length-1,r=0;if(o>-1){var t=n[n.length-1].offsetTop;for(o;o>=0;o-=1)n[o].offsetTop===t&&(r+=1);return r}return 0},r.orderItems=function(e){var n,o,t,s,i,l=r.countAvailableColumns(e);for(e.simpleMesonry.fill=l,t=e.simpleMesonry.columns,s=t.length-1,i=s-l,n=e.simpleMesonry.items,o=n.length-1;o>=0;o-=1)i>=s&&(s=t.length-1),t[s].appendChild(n[o]),s-=1;r.doEvent("order",n)},u=function(e){var n=e.childNodes,o=n.length-1,t=[];for(o;o>=0;o-=1)r.isNode(n[o])&&t.push(n[o]);return t.reverse()},l=function(e){var n,o=e.simpleMesonry&&e.simpleMesonry.columns,r=o.length-1,t=[],s=function(e){var n=[],o=e.length,r=0,t=function s(t,i){o>r&&(t===o&&(r=t=0,i+=1),e[t][i]?n.push(e[t][i]):r+=1,s(t+1,i))};return t(0,0),n.reverse()};for(r;r>=0;r-=1)n=u(o[r]),t.push(n);e.simpleMesonry.items=s(t)},i=function(e){var n=e.querySelectorAll(r.masonryColumn),o=n.length-1;for(o;o>=0;o-=1)n[o].parentNode===e&&(n[o].style.minHeight="1px",n[o].style.minWidth="1px",n[o].style["float"]="left",e.simpleMesonry.columns.push(n[o]))},r.eventStore={},r.doEvent=function(e,n){if(r.eventStore[e]){var o=r.eventStore[e].length-1;for(o;o>=0;o-=1)r.eventStore[e][o](n)}},r.init=function(e){e.simpleMesonry={columns:[],items:null,fill:0},i(e),l(e),r.orderItems(e)},window.addEventListener("resize",function(){var e=r.columnBoxes.length-1;for(e;e>=0;e-=1){var n=r.columnBoxes[e],o=r.countAvailableColumns(n);o!==n.simpleMesonry.fill&&r.orderItems(n)}})}return _createClass(e,[{key:"init",value:function(){var e=this,n=o(e).privates,r=n.columnBoxes,t=n.iBoxes;for(t;t>=0;t-=1)n.init(r[t]);return this}},{key:"append",value:function(e){var n=o(this).privates,r=n.columnBoxes[0],t=0;if(n.isNode(e))n.splice(e),r.simpleMesonry.items.unshift(e),n.orderItems(r),n.doEvent("append",e);else if(Array.isArray(e)){for(t=e.length-1,e.reverse(),t;t>=0;t-=1)n.isNode(e[t])&&(n.splice(e[t]),r.simpleMesonry.items.unshift(e[t]),n.doEvent("append",e[t]));n.orderItems(r)}return this}},{key:"prepend",value:function(e){var n=o(this).privates,r=n.columnBoxes[0],t=0;if(n.isNode(e))n.splice(e),r.simpleMesonry.items.push(e),n.doEvent("prepend",e),n.orderItems(r);else if(Array.isArray(e)){for(t=e.length-1,e.reverse(),t;t>=0;t-=1)n.isNode(e[t])&&(n.splice(e[t]),r.simpleMesonry.items.push(e[t]),n.doEvent("prepend",e[t]));n.orderItems(r)}return this}},{key:"get",value:function(e){var n=o(this).privates,r=n.columnBoxes[0],t=void 0,s=void 0,i=void 0,l=void 0,u=void 0;if("number"!=typeof e)return n.reverseCopy(r.simpleMesonry.items);if(t=n.countAvailableColumns(r)-1,e>t)return[];for(s=r.simpleMesonry.columns[r.simpleMesonry.columns.length-1-e],i=[],l=r.simpleMesonry.items,u=l.length-1;u>=0;u-=1)l[u].parentNode===s&&i.push(l[u]);return n.reverseCopy(i)}},{key:"each",value:function(e,n){var o=void 0,r=void 0;if("function"==typeof e)for(o=this.get(n),r=o.length-1;r>=0;r-=1)e(o[r],o.length-1-r);return this}},{key:"on",value:function(e,n){var r=o(this).privates;return r.eventStore[e]||(r.eventStore[e]=[]),"function"==typeof n&&r.eventStore[e].push(n),this}},{key:"columnsLength",value:function(){var e=o(this).privates,n=e.columnBoxes[0];return e.countAvailableColumns(n)}}]),e}();return r}());